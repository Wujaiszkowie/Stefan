# =============================================================================
# Wspiernik Backend Configuration
# =============================================================================

# Application
quarkus.application.name=wspiernik-backend
quarkus.http.port=8080

# =============================================================================
# Database Configuration (SQLite)
# =============================================================================
quarkus.datasource.db-kind=other
quarkus.datasource.jdbc.driver=org.sqlite.JDBC
quarkus.datasource.jdbc.url=jdbc:sqlite:wspiernik.db
# SQLite doesn't support concurrent writes - use single connection
quarkus.datasource.jdbc.min-size=1
quarkus.datasource.jdbc.max-size=1
quarkus.datasource.jdbc.acquisition-timeout=30
# Use RESOURCE_LOCAL transactions (not JTA/XA) for SQLite compatibility
quarkus.datasource.jdbc.transactions=enabled

# Hibernate ORM
quarkus.hibernate-orm.dialect=org.hibernate.community.dialect.SQLiteDialect
quarkus.hibernate-orm.database.generation=update
quarkus.hibernate-orm.log.sql=false
# Use RESOURCE_LOCAL for SQLite (disable JTA)
quarkus.transaction-manager.enable-recovery=false

# =============================================================================
# LLM Configuration (Bielnik - OpenAI Compatible)
# =============================================================================
wspiernik.llm.base-url=http://localhost:11434
wspiernik.llm.model=bielik
wspiernik.llm.max-tokens=2048
wspiernik.llm.temperature=0.7

# REST Client for LLM (Bielnik API)
quarkus.rest-client.bielnik-api.url=${wspiernik.llm.base-url}
quarkus.rest-client.bielnik-api.read-timeout=60000
quarkus.rest-client.bielnik-api.connect-timeout=10000

# =============================================================================
# WebSocket Configuration
# =============================================================================
quarkus.websockets-next.server.auto-ping-interval=30s

# =============================================================================
# CORS Configuration (for frontend)
# =============================================================================
quarkus.http.cors.origins=http://localhost:3000,http://localhost:5173
quarkus.http.cors.methods=GET,POST,PUT,DELETE,OPTIONS
quarkus.http.cors.headers=Content-Type,Authorization
quarkus.http.cors.exposed-headers=Content-Type

# =============================================================================
# Logging Configuration
# =============================================================================
quarkus.log.level=INFO
quarkus.log.category."com.wspiernik".level=DEBUG
quarkus.log.console.format=%d{yyyy-MM-dd HH:mm:ss} %-5p [%c{2.}] (%t) %s%e%n

# =============================================================================
# Health Check
# =============================================================================
quarkus.smallrye-health.root-path=/health

# =============================================================================
# Mock LLM Profile (for development without real LLM)
# Usage: ./mvnw quarkus:dev -Dquarkus.profile=mock-llm
# =============================================================================
%mock-llm.quarkus.arc.selected-alternatives=com.wspiernik.infrastructure.llm.MockLlmClient
